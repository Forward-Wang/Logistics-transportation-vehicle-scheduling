# Logistics transportation vehicle scheduling

GOC 城市物流运输车辆智能调度

2018年7月13日 23:32

### 2 分析问题

问题假设：

- 车辆从配送中心出发，服务完客户后需返回配送中心，车辆可多次往返循环配送，发车时间为早晨8:00后(含)，回配送中心最晚时间为当日24:00；
- 车辆到达客户时间必须在客户要求的最晚时间前到达(含)，同时，先于客户要求的最早到达时间则有等待成本;
- 配送中心首次发车不计等待成本，其余等待均计算成本；
- 车辆如果未被使用(即未访问客户)则不花费任何成本，车辆数不限； 
- 配送中心出发的车辆(包括多次往返配送中心场景)为满电状态，不计充电费用和充电时间，但对于多次往返配送中心场景，第二次起从配送中心出发需要在配送中心等待1h,计算等待成本； 
- 配送中心、充电站、客户之间的距离(m)和车辆行驶时间(min)以距离时间表（表3）形式体现；  
- 每辆货车在行驶中的车载质量和装货体积不超过该车型的质量和体积限制； 
- 每个客户一天只能被一辆车服务，卸货时间恒定为0.5h, 装车时间不计； 
- 充电站充电费用为100元/h； 
- 充电站的充电桩无限制，车辆需要在可持续里程到达前在充电站充电，车辆一次充满，每次充电时间恒定为0.5h； 
- 等待成本的成本系数为24元/h；

   本问题属于运筹优化中VRP问题(Vehicle Routing Problem)，具体来看是GVRP(Green VRP)问题。

   首先分析问题，进行数学建模。本算题GVRP的绿色考虑了电车的多循环和充电问题。**综合成本是运输成本，等待成本，充电成本和固定成本的总和**，即为目标函数。对于约束条件，这里有VRP中常见的最大容量约束(CVRP)、时间窗口约束(VRPTW)、混合车辆约束(Heterogeneous Fleet VRP)、多循环约束(Multi-trip VRP)、带充电站的电车里程约束(Electric VRP with Recharging Stations)。


   ​	

| 综合成本 (total cost)          |                                                |
| ------------------------------ | ---------------------------------------------- |
| 固定成本 (fixed cost)          |                                                |
| 运输成本 (transportation cost) | 与车辆的运输里程成正比                         |
| 等待成本 (waiting cost)        | 与等待时间成正比                               |
| 充电成本 (charging cost)       | 与充电站的充电次数成正比，配送中心充电不计成本 |

注：等待时间是指从车辆发车到收车过程中在配送中心的等待时间(不含首次)、商家的等待时间(不包括服务时间)，充电站的等待时间(不包括充电时间)



| 约束                                                        |                                                              |
| ----------------------------------------------------------- | ------------------------------------------------------------ |
| 时间窗口约束                                                | 所有车辆要满足要求的最早发车时间和最晚收车时间，早到要等待   |
| 最大容量限制                                                | 所有配送的车辆在任意一趟运输中都不能超出车辆的载容和载重限制 |
| 混合车辆约束                                                | 路径规划方案中配送的车型不唯一，并且数量不受限               |
| 多循环VRP                                                   | 一辆车送完货回到配送中心等待1小时可再次送货                  |
| 充电站的电车里程约束(Electric VRP with Recharging Stations) | 充电的地方有充电站和配送中心，假设每次充满发车，电量对行驶里程有限制，从配送中心每次发车前默认充满电，途中行驶里程不够可到充电站充满 |



### 3 建立模型

​	至此，建模完成，接下来调用求解工具或者设计算法(如metaheuristic)去求解问题了。目标中考虑了等待成本，这也说明了，车辆在途的等待是可以的，但要花成本，因此，这不仅是个路径规划问题，时间的合理安排也能减少成本。  

$$  total\_cost = fixed\_cost+transportation\_cost+waiting\_cost+charging\_cost $$ 

$$ min{total cost} = min{fixed cost+transportation cost+waiting cost+charging cost} $$ 

- 首先要确定数据结构	